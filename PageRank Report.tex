\documentclass[a4paper, titlepage]{report}

\usepackage[latin1]{inputenc}
\usepackage[T1]{fontenc}
\usepackage{geometry} %marges
\usepackage[francais]{babel}
\usepackage{graphicx}
\usepackage{verbatim}
\usepackage{listings} %affichage du code
\usepackage[compact]{titlesec} % affichage compact
\usepackage{amsmath} % matrice

\title{SINF 1250: Rapport de projet}
\author{Maxime Dillion \and Jacques Yakoub}
\date{24 décembre 2017}

\pagestyle{headings}

\begin{document}

\maketitle
\tableofcontents

\chapter{Théorie}
\section{Rappel}
\paragraph{}
[Rappel de la partie théorique]

\subsection{Système d'équations linéaires}

Avec cette méthode, la recherche du vecteur de score devient une question de vecteur propre. Ici, il serait fait le choix d'expliquer le vecteur de droite afin de faciliter les calculs dont voici son expression mathématique :

% TODO pas familier avec les expressions math de latex ^^
Gt * X = X

Ou X étant le vecteur et Gt la transposée de la matrice google.

Appliquons cette formule à la situation présente :

\[
\begin{bmatrix}
\frac{1}{50} & \frac{187}{350} & \frac{49}{200} & \frac{1}{50} & \frac{47}{100} \\ \\
\frac{11}{50} & \frac{1}{50} & \frac{49}{200} & \frac{1}{5} & \frac{47}{100} \\ \\
\frac{21}{50} & \frac{1}{50} & \frac{1}{50} & \frac{37}{50} & \frac{1}{50} \\ \\
\frac{3}{25} & \frac{97}{350} & \frac{79}{200} & \frac{1}{50} & \frac{1}{50} \\ \\
\frac{11}{50} & \frac{26}{175} & \frac{19}{200} & \frac{1}{50} & \frac{1}{50}
\end{bmatrix}
*
\begin{bmatrix}
x1      \\
x2    	\\
x3		\\
x4		\\
x5		\\    
\end{bmatrix}
= 
\begin{bmatrix}
x1      \\
x2    	\\
x3		\\
x4		\\
x5		\\
\end{bmatrix} 
\]

En rajoutant une ligne de 1, nous nous assurons que la somme de x1,..,xn termes doit valoir 1. Enfin, avant de pouvoir résoudre le système par des opérations matricielles pour obtenir une forme en escalier , il faut simplifier la forme présente en passant les inconnues du côté gauche de l'équation. 

% TODO A finir
\[
\begin{bmatrix}
\frac{-49}{50} & \frac{187}{350} & \frac{49}{200} & \frac{1}{50} & \frac{47}{100} \\ \\
\frac{11}{50} & \frac{-49}{50} & \frac{49}{200} & \frac{1}{5} & \frac{47}{100} \\ \\
\frac{21}{50} & \frac{1}{50} & \frac{-49}{50} & \frac{37}{50} & \frac{1}{50} \\ \\
\frac{3}{25} & \frac{97}{350} & \frac{79}{200} & \frac{-49}{50} & \frac{1}{50} \\ \\
\frac{11}{50} & \frac{26}{175} & \frac{19}{200} & \frac{1}{50} & \frac{-49}{50}
\end{bmatrix}
\]
	
\section{Calcul}
\subsection{Système d'équation sous forme matriciel}
% & \\
\[
\begin{pmatrix} 
1 & 1 & 1 & 1 & 1 & 1 \\ \\
\frac{-49}{50} & \frac{187}{350} & \frac{49}{200} & \frac{1}{50} & \frac{47}{100} & 0 \\ \\
\frac{11}{50} & \frac{-49}{50} & \frac{49}{200} & \frac{1}{5} & \frac{47}{100} & 0 \\ \\
\frac{21}{50} & \frac{1}{50} & \frac{-49}{50} & \frac{37}{50} & \frac{1}{50} & 0 \\ \\
\frac{3}{25} & \frac{97}{350} & \frac{79}{200} & \frac{-49}{50} & \frac{1}{50} & 0 \\ \\
\frac{11}{50} & \frac{26}{175} & \frac{19}{200} & \frac{1}{50} & \frac{-49}{50} & 0
\end{pmatrix}
\]

\subsection{Système d'équation après résolution}
\[
\begin{pmatrix} 
1 & 0 & 0 & 0 & 0 & \frac{278338891485003}{1185309949623550} \\ \\
0 & 1 & 0 & 0 & 0 & \frac{1574961688097759}{7540409867060228} \\ \\
0 & 0 & 1 & 0 & 0 & \frac{3332146709283619}{1.32265796170871e+16} \\ \\
0 & 0 & 0 & 1 & 0 & \frac{534623}{2789366} \\ \\
0 & 0 & 0 & 0 & 1 & \frac{1572003}{13946830} \\ \\
0 & 0 & 0 & 0 & 0 & 0
\end{pmatrix}
\]
On a donc :
$x_{1} = \frac{278338891485003}{1185309949623550}$ ;
$x_{2} = \frac{1574961688097759}{7540409867060228}$ ;
$x_{3} = \frac{3332146709283619}{1.32265796170871e+16}$ ;
$x_{4} = \frac{534623}{2789366}$ ;
$x_{5} = \frac{1572003}{13946830}$

\newpage

\chapter{Implémentation}

\section{Matrice d'adjacence}
\[
\begin{pmatrix} 
	0 & 2 & 4 & 1 & 2 \\
	4 & 0 & 0 & 2 & 1  \\
	3 & 3 & 0 & 5 & 1  \\
	0 & 1 & 4 & 0 & 0  \\
	3 & 3 & 0 & 0 & 0
\end{pmatrix}
\]

\section{Degré entrant des noeuds}
\[
\begin{pmatrix} 
	10 & 9 & 8 & 8 & 4
\end{pmatrix}
\]

% TODO je pense qu'il faut mettre la matrice de probablité P (et non Pt)
\section{Matrice de probabilité de transition}
\[
\begin{pmatrix} 
0 & \frac{4}{7} & \frac{1}{4} & 0 & \frac{1}{2} \\
\frac{2}{9} & 0 & \frac{1}{4} & \frac{1}{5} & \frac{1}{2}  \\
\frac{4}{9} & 0 & 0 & \frac{4}{5} & 0  \\
\frac{1}{9} & \frac{2}{7} & \frac{5}{12} & 0 & 0  \\
\frac{2}{9} & \frac{1}{7} & \frac{1}{12} & 0 & 0
\end{pmatrix}
\]

\section{Matrice Google}
\[
\begin{pmatrix} 
\frac{1}{50} & \frac{11}{50} & \frac{21}{50} & \frac{3}{25} & \frac{11}{50} \\
\frac{187}{350} & \frac{1}{50} & \frac{1}{50} & \frac{97}{350} & \frac{26}{175}  \\
\frac{49}{200} & \frac{49}{200} & \frac{1}{50} & \frac{79}{200} & \frac{19}{200}  \\
\frac{1}{50} & \frac{1}{5} & \frac{37}{50} & \frac{1}{50} & \frac{1}{50}  \\
\frac{47}{100} & \frac{47}{100} & \frac{1}{50} & \frac{1}{50} & \frac{1}{50}
\end{pmatrix}
\]

\section{Trois premières itérations de la power method}
\subsection{Itération n°1}
\[
\begin{pmatrix} 
\frac{1051}{4550} & \frac{391}{1950} & \frac{527}{1950} & \frac{191}{1050} & \frac{794}{6825}
\end{pmatrix}
\]
\subsection{Itération n°2}
\[
\begin{pmatrix} 
\frac{43003}{182000} & \frac{2121}{10000} & \frac{27683}{113750} & \frac{35673}{182000} & \frac{20429}{182000}
\end{pmatrix}
\]
\subsection{Itération n°3}
\[
\begin{pmatrix} 
\frac{67623}{288557} & \frac{93767}{451224} & \frac{145393}{568750} & \frac{188765}{996486} & \frac{15789}{140000}
\end{pmatrix}
\]

\section{Score PageRank}
\[
\begin{pmatrix} 
\frac{139718}{594991} & \frac{200248}{958723} & \frac{50534}{200589} & \frac{154407}{805610} & \frac{112253}{995910}
\end{pmatrix}
\]

\appendix %annexes

\chapter{Code complet}
\lstinputlisting [language=Python, breaklines=true] {pakerank.py}

\end{document}